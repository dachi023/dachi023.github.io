<!doctype html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><meta name="description" content="今日のやったこと"><title>Deploying Docker app on GAE 🐳 | dachi.work</title><link rel="stylesheet" href="/style.min.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans+JP&display=swap"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Pacifico&display=swap"></head><body><header><h1><a href="/">dachi.work</a></h1></header><main><article><span>January 22, 2019</span><h1>Deploying Docker app on GAE 🐳</h1><p><img src="https://cdn-images-1.medium.com/max/800/0*ipJfptDV5JqZcvYn.png" alt="1月22日はカレーの日、カレー食べたい"> 1月22日は<a href="http://www.nnh.to/01/22.html">カレーの日</a>、カレー食べたい</p><h3>GAEにデプロイ2日目</h3><p><a href="https://medium.com/@dachi/my-memory-has-gone-away-d1944bf1ef4b">昨日</a>の続き。いろいろ試行錯誤した結果、nodeのalpineイメージでGAEにちゃんとデプロイできた。だいぶ時間かかったけどなんとかなったので良かった。ちなみに、ハマったポイントはこんなかんじ。</p><ul><li>デプロイ時にGAE側で <code>node_modules</code> を消してるっぽくて、<br>実行時に必要なものまで消えちゃってた</li><li>8080番ポートで待ち受けておかないとだめ</li><li>Expressだったら <code>app.enable('trust proxy')</code> しないとだめ</li></ul><p>node_modules消えちゃうのが1番納得いってないけど、まあそういうものなのかな…仕方ないのかな…と今のところは思ってる。</p><p>デプロイできたのはいいけどローカルで実行するよりも効率悪くなっちゃったので次はマシンスペックとかをごにょごにょしないとだめっぽい。</p></article></main><footer><p>&copy; 2019 dachi</p></footer></body></html>